90 TI$="000000"
100 V=53248
110 BG=8192
120 BF=1024
130 FA=6*16+7
140 FB=7*16+6
150 W=320
160 H=200
170 XS=-2.1
180 YS=-1.3
190 DX=2.8/W
200 DY=2.6/H
210 MD=32
300 GOSUB 2000
310 GOSUB 4000
320 GOSUB 5000
500 FOR Y=0 TO H-1
510 CI=YS+DY*Y
520 FOR X=0 TO W-1
525 GOSUB 7000
530 CR=XS+DX*X
540 DR=0
550 DI=0
560 DE=0
570 IF DE=MD OR DR*DR+DI*DI>4 THEN 630
580 T=DR
590 DR=DR*DR-DI*DI+CR
600 DI=2*T*DI+CI
610 DE=DE+1
620 GOTO 570
630 IF DE=MD THEN 660
640 GOSUB 6000
650 GOTO 670
660 GOSUB 7000
670 NEXT
680 NEXT
990 T$=TI$
1000 WAIT 198,255
1010 GOSUB 3000
1020 PRINT T$
1030 END
2000 REM ACTIVATE GRAPHICS
2010 POKE V+17, PEEK(V+17) OR (8+3)*16
2020 POKE V+22, PEEK(V+22) AND 255-16
2030 POKE V+24, PEEK(V+24) OR 8
2040 RETURN
3000 REM DEACTIVATE GRAPHICS
3010 POKE V+17, PEEK(V+17) AND 9*16+15
3020 POKE V+24, PEEK(V+24) AND 15*16+7
3030 RETURN
4000 REM CLEAR FRAMEBUFFER
4010 FOR I=BG TO BG+8000
4020 POKE I,0
4030 NEXT I
4040 RETURN
4050 FOR I=BF TO BF+1000
4060 POKE I,FA
4070 NEXT I
4080 RETURN
5000 REM CLEAR COLOR BUFFER
5010 FOR I=BF TO BF+1000
5020 POKE I,FA
5030 NEXT I
5040 RETURN
6000 REM SET POINT @ (X,Y)
6010 RA=W*INT(Y/8)+(Y AND 7)
6020 BA=8*INT(X/8)
6030 MA=2^(7-(X AND 7))
6040 AD=BG+RA+BA
6050 POKE AD, PEEK(AD) OR MA
6060 RETURN
7000 REM DELETE POINT @ (X,Y)
7010 RA=W*INT(Y/8)+(Y AND 7)
7020 BA=8*INT(X/8)
7030 MA=255-2^(7-(X AND 7))
7040 AD=BG+RA+BA
7050 POKE AD, PEEK(AD) AND MA
7060 RETURN
